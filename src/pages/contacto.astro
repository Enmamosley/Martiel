---
import Button from "@/components/Button.astro";
import config from "@/config/config.json";
import Base from "@/layouts/Base.astro";
import { markdownify } from "@/lib/utils/textConverter";
import CallToAction from "@/partials/CallToAction.astro";
import PageHeader from "@/partials/PageHeader.astro";
import type { CollectionEntry } from "astro:content";
import { getEntry } from "astro:content";

const contact = (await getEntry(
  "contact",
  "-index"
)) as CollectionEntry<"contact">;
const { contact_form_action }: { contact_form_action: string } = config.params;
const { title, description, meta_title, image, address_section } = contact.data;
---

<Base
  title={title}
  meta_title={meta_title}
  description={description}
  image={image}
>
  <PageHeader title={title} />
  <section
    class="-mt-[20%] sm:-mt-[15%] md:-mt-[12%] lg:-mt-[10%] xl:-mt-[8%] 2xl:-mt-[7%] mb-10"
  >
    <div class="container">
      <div
        class="flex flex-col lg:flex-row gap-20 justify-center lg:justify-between"
      >
        <div class="lg:w-[52%]">
          <form
            data-aos="fade-right-sm"
            data-aos-delay="150"
            class="bg-primary px-8 sm:px-12 py-10 sm:py-14 shadow-xl rounded-lg border border-white/10 contact-form-shadow"
            action={contact_form_action}
            method="POST"
            onsubmit="alert('¡Gracias por tu mensaje! Te contactaremos pronto.'); return false;"
          >
            <h2 class="text-white mb-4" set:html={markdownify(title)} />
            {
              description && (
                <p
                  class="text-text-light/80 mb-16"
                  set:html={markdownify(description)}
                />
              )
            }

            <div class="mb-6">
              <label for="full_name" class="form-label">
                Nombre completo <span class="text-red-500">*</span>
              </label>
              <input
                id="full_name"
                name="full_name"
                class="form-input"
                placeholder="John Doe"
                type="text"
              />
            </div>
            <div class="mb-6">
              <label for="email" class="form-label">
                Dirección de correo electrónico <span class="text-red-500">*</span>
              </label>
              <input
                id="email"
                name="email"
                class="form-input"
                placeholder="john.doe@email.com"
                type="email"
              />
            </div>
            <div class="mb-6">
              <label for="subject" class="form-label">
                Asunto de la consulta <span class="text-red-500">*</span>
              </label>
              <input
                id="subject"
                name="subject"
                class="form-input"
                placeholder="Cotización de cocina integral"
                type="text"
              />
            </div>
            <div class="mb-6">
              <label for="message" class="form-label">
                Mensaje <span class="text-red-500">*</span>
              </label>
              <textarea
                id="message"
                name="message"
                class="form-input"
                placeholder="Escribe tus mensajes..."
                rows="3"></textarea>
            </div>
            <Button
              enable
              label="Enviar mensaje"
              type="submit"
              style="btn-primary"
            />
          </form>
        </div>

        <div class="lg:w-[40%] self-center lg:self-end pb-14">
          <h3
            data-aos="fade-up-sm"
            data-aos-delay="150"
            class="h4 mb-4"
            set:html={markdownify(address_section.title)}
          />
          <p
            data-aos="fade-up-sm"
            data-aos-delay="200"
            class="text-balance"
            set:html={markdownify(address_section.description)}
          />

          <ul class="grid gap-8 mt-12 sm:grid-cols-2">
            <li data-aos="fade-up-sm" data-aos-delay="250" class="contact-info-item">
              <h4 class="h6 mb-3">Correo electrónico</h4>
              <a href={`mailto:${config.params.email}`} class="text-primary hover:text-primary-dark transition">{config.params.email}</a
              >
            </li>
            <li data-aos="fade-up-sm" data-aos-delay="300" class="contact-info-item">
              <h4 class="h6 mb-3">Teléfono</h4>
              <a href={`tel:${config.params.phone}`} class="text-primary hover:text-primary-dark transition">{config.params.phone}</a>
            </li>
            <li data-aos="fade-up-sm" data-aos-delay="350" class="sm:col-span-2 contact-info-item">
              <h4 class="h6 mb-3">Dirección</h4>
              <a
                target="_blank"
                href={`https://www.google.com/maps?q=${encodeURIComponent(config.params.address)}`}
                class="text-primary hover:text-primary-dark transition"
                set:html={markdownify(config.params.address)}
              />
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  <CallToAction isNoSectionTop={true} isNoSectionBottom={true} />
</Base>
